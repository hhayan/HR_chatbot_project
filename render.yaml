# render.yaml — Render Blueprint
# GitHub 연동 후 "New Blueprint Instance"로 한 번에 배포

services:
  # ============ Backend: FastAPI + LangGraph ============
  - type: web
    name: hr-chatbot-backend
    runtime: docker
    dockerfilePath: ./backend/Dockerfile
    dockerContext: .
    healthCheckPath: /health
    envVars:
      - key: OPENAI_API_KEY
        sync: false
      - key: PINECONE_API_KEY
        sync: false
      - key: PINECONE_INDEX
        value: gaida-hr-rules
      - key: ALLOWED_ORIGINS
        value: https://hr-chatbot-frontend.onrender.com

  # ============ Frontend: Streamlit UI ============
  - type: web
    name: hr-chatbot-frontend
    runtime: docker
    dockerfilePath: ./frontend/Dockerfile
    dockerContext: .
    envVars:
      - key: BACKEND_URL
        fromService:
          name: hr-chatbot-backend
          type: web
          property: host
