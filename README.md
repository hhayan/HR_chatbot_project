# ê°€ì´ë‹¤ HR ì±—ë´‡ ğŸ¤–

**RAG ê¸°ë°˜ ì‚¬ë‚´ HR ì§ˆë¬¸ ì‘ë‹µ ì‹œìŠ¤í…œ**

ê°€ìƒì˜ íšŒì‚¬ 'ê°€ì´ë‹¤ í”Œë ˆì´ ìŠ¤íŠœë””ì˜¤(Gaida Play Studio, GPS)'ë¥¼ ìœ„í•œ AI ê¸°ë°˜ HR ì±—ë´‡ìœ¼ë¡œ, RAG(Retrieval-Augmented Generation), Reranker, ê²€ì¦ ë£¨í”„ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ë‚´ ì •ì±…ì— ëŒ€í•œ ì •í™•í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

> ğŸ”— **Live Demo**: [https://frontend-iqeh.onrender.com](https://frontend-iqeh.onrender.com)

---

## ì°¸ì—¬ì¸ì›, ì—­í• 
4ì¸, 1ì°¨ ë¼ìš°í„°, ê±°ì ˆ ë…¸ë“œ, ì „ì²˜ë¦¬ ë…¸ë“œ, ë°°í¬

## ë¬¸ì œí•´ê²°

- RAG íŒŒì´í”„ë¼ì¸ ê³ ë„í™”: ê²€ìƒ‰, ë¦¬ë­í‚¹, ë‹µë³€ ì •í™•ì„± ê²€ì¦ ë£¨í”„ êµ¬í˜„ì„ í†µí•œ ë‹µë³€ ì—ëŸ¬ í™•ë¥  ì¶•ì†Œ 2% â†’ 0%
- ì‘ë‹µ ì†ë„ 8% ê°œì„ : í”„ë¡¬í”„íŠ¸ ìµœì í™” ë° ê²½ëŸ‰ ëª¨ë¸(GPT-4o-mini) ë„ì…ì„ í†µí•´ First Token Latency(P50)ë¥¼ 0.64s â†’ 0.59së¡œ ë‹¨ì¶•
- í”„ë¡¬í”„íŠ¸ ë‚´ ì§€ì‹œ ì‚¬í•­ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì¬ì •ë¦½í•˜ì—¬ ì¶©ëŒì„ ë°©ì§€, ë³´ì•ˆ ìœ„ë°° ì§ˆë¬¸ì´ RAGë¡œ ë„˜ì–´ê°€ì§€ ì•Šë„ë¡ ì „ì²˜ë¦¬ ë¡œì§ ê°•í™”í•˜ì—¬ ë‹µë³€ ì•ˆì •ì„±, í‰ê·  ë‹µë³€ ì‹œì‘ ì‹œê°„ì„ 0.6~1.6s í™•ë³´
- ì½”ë“œ ë³µì¡ë„ í•´ì†Œ: ë³µì¡í•œ íŒŒì‹± ë¡œì§ì„ Structured Output(êµ¬ì¡°í™”ëœ ì¶œë ¥) ë°©ì‹ìœ¼ë¡œ ë¦¬íŒ©í† ë§í•˜ì—¬ ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

## ì„±ê³¼

- LangGraph ê¸°ë°˜ ìˆœí™˜í˜• ì•„í‚¤í…ì²˜ êµ¬ì¶• ê²½í—˜(ì¡°ê±´ë¶€ ë¶„ê¸° ë° ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ ì„¤ê³„)
- ë¦¬ë­í‚¹ê³¼ ë‹µë³€ ê²€ì¦ ë£¨í”„ê°€ ì ìš©ëœ RAG ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ì—¬, í™˜ê°ì„ ìµœì†Œí™”í•˜ê³  ë‹µë³€ ì •í™•ë„ í–¥ìƒ ê¸°ìˆ  ê²½í—˜

---

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|---|---|
| **RAG ê¸°ë°˜ ë‹µë³€ ìƒì„±** | Pinecone ë²¡í„° DBë¥¼ í™œìš©í•œ ì˜ë¯¸ë¡ ì  ë¬¸ì„œ ê²€ìƒ‰ ë° ë‹µë³€ ìƒì„± |
| **ìë™ ì§ˆë¬¸ ë¶„ë¥˜** | 1ì°¨(HR ì—¬ë¶€) â†’ 2ì°¨(RAG ì²˜ë¦¬ ê°€ëŠ¥ ì—¬ë¶€) ìë™ ë¶„ê¸° |
| **AI ê¸°ë°˜ ë‹µë³€ ê²€ì¦** | ë‹µë³€ í’ˆì§ˆ ê²€ì¦ ë° ì¬ìƒì„± ë£¨í”„ |
| **ë‹´ë‹¹ ë¶€ì„œ ì•ˆë‚´** | RAG ì²˜ë¦¬ ë¶ˆê°€ ì§ˆë¬¸ì— ëŒ€í•œ ë‹´ë‹¹ ë¶€ì„œ/ì´ë©”ì¼/Slack ì•ˆë‚´ |
| **ì§ˆë¬¸ ì „ì²˜ë¦¬** | ëª¨í˜¸í•œ ì§ˆë¬¸ì„ LLMì´ ì²˜ë¦¬í•˜ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ìë™ ì •ì œ |

---

## ğŸ—‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ğŸ“¦ HR_chatbot_project/
â”œâ”€â”€ ğŸ“‚ backend/                 # FastAPI + LangGraph (API í‚¤ ë³´ìœ )
â”‚   â”œâ”€â”€ ğŸ“„ main.py              # FastAPI ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ ğŸ“„ graph.py             # LangGraph ì›Œí¬í”Œë¡œìš° ì •ì˜
â”‚   â”œâ”€â”€ ğŸ“„ nodes.py             # ë…¸ë“œ êµ¬í˜„ (ê²€ìƒ‰, ìƒì„±, ê²€ì¦)
â”‚   â”œâ”€â”€ ğŸ“„ router.py            # ì§ˆë¬¸ ë¶„ë¥˜ ë¼ìš°íŒ… ë¡œì§
â”‚   â”œâ”€â”€ ğŸ“„ state.py             # LangGraph State ì •ì˜
â”‚   â”œâ”€â”€ ğŸ“„ db.py                # Pinecone ë²¡í„° DB ì—°ë™
â”‚   â”œâ”€â”€ ğŸ“„ llm.py               # LLM íŒ©í† ë¦¬ í•¨ìˆ˜
â”‚   â”œâ”€â”€ ğŸ“„ config.py            # í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ (pydantic-settings)
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile           # Backend Docker ì´ë¯¸ì§€
â”‚   â””â”€â”€ ğŸ“„ requirements.txt     # Backend ì˜ì¡´ì„±
â”œâ”€â”€ ğŸ“‚ frontend/                # Streamlit UI (API í‚¤ ë¯¸ë³´ìœ )
â”‚   â”œâ”€â”€ ğŸ“„ app.py               # ì±—ë´‡ UI
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile           # Frontend Docker ì´ë¯¸ì§€
â”‚   â””â”€â”€ ğŸ“„ requirements.txt     # Frontend ì˜ì¡´ì„±
â”œâ”€â”€ ğŸ“„ docker-compose.yml       # Docker Compose ì„¤ì •
â”œâ”€â”€ ğŸ“„ render.yaml              # Render Blueprint ë°°í¬ ì„¤ì •
â”œâ”€â”€ ğŸ“„ .env.example             # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â””â”€â”€ ğŸ“„ README.md
```

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

| ì˜ì—­ | ê¸°ìˆ  |
|---|---|
| **Backend** | FastAPI, LangGraph, Python 3.12 |
| **Frontend** | Streamlit |
| **LLM** | GPT-4.1 (ìƒì„±), GPT-4.1-nano (ë¼ìš°í„°) |
| **Vector DB** | Pinecone + OpenAI text-embedding-3-small |
| **Infra** | Docker, Render (Free Plan) |

---

## ğŸ”„ LangGraph ì›Œí¬í”Œë¡œìš°

```mermaid
graph TD
    A[ì‚¬ìš©ì ì§ˆë¬¸ ì…ë ¥] --> B[refine_question<br/>ì§ˆë¬¸ ì „ì²˜ë¦¬]
    B --> C{update_hr_status<br/>1ì°¨ ë¼ìš°í„°<br/>HR ê´€ë ¨?}

    C -->|Yes| D{update_rag_status<br/>2ì°¨ ë¼ìš°í„°<br/>RAG ì²˜ë¦¬ ê°€ëŠ¥?}
    C -->|No| E[generate_reject_answer<br/>ë‹µë³€ ê±°ì ˆ]

    D -->|Yes| F[generate_rag_answer<br/>RAG ê¸°ë°˜ ë‹µë³€]
    D -->|No| G[generate_contact_answer<br/>ë‹´ë‹¹ì ì•ˆë‚´]

    F --> H{verify_rag_answer<br/>í’ˆì§ˆ ê²€ì¦}

    H -->|ì¼ì¹˜í•¨| I[ìµœì¢… ë‹µë³€ ì™„ë£Œ]
    H -->|ë¶ˆì¼ì¹˜í•¨| F[ragë¡œ ë¡¤ë°±]

    E --> I[ìµœì¢… ë‹µë³€ ì™„ë£Œ]
    G --> I[ìµœì¢… ë‹µë³€ ì™„ë£Œ]

    style A fill:#8fa1be
    style I fill:#72b272
    style C fill:#c5a573
    style D fill:#c5a573
    style H fill:#c5a573
```

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env.example` íŒŒì¼ì— ë°œê¸‰ë°›ì€ API_KEYë¥¼ ë„£ìŠµë‹ˆë‹¤.
```bash
OPENAI_API_KEY=your_openai_api_key
PINECONE_API_KEY=your_pinecone_api_key
PINECONE_INDEX=gaida-hr-rules
```

### ë¡œì»¬ ì‹¤í–‰ (Docker Compose)
```bash
docker-compose up --build
```
- Backend API: `http://localhost:8000`
- Frontend UI: `http://localhost:8501`

---

## â˜ï¸ Render ë°°í¬

Backendì™€ Frontendë¥¼ **ê°ê° ë³„ë„ Web Service**ë¡œ ë°°í¬í•©ë‹ˆë‹¤.

### ì„œë¹„ìŠ¤ êµ¬ì„±

| ì„œë¹„ìŠ¤ | URL | ì—­í•  |
|---|---|---|
| Backend | `https://hr-chatbot-project.onrender.com` | FastAPI + RAG API |
| Frontend | `https://frontend-iqeh.onrender.com` | Streamlit ì±—ë´‡ UI |

### Step 1: Backend ì„œë¹„ìŠ¤

| ì„¤ì • | ê°’ |
|---|---|
| Runtime | Docker |
| Dockerfile Path | `./backend/Dockerfile` |
| Docker Build Context | `.` |
| Health Check Path | `/health` |

**Environment Variables:**
| Key | Value |
|---|---|
| `OPENAI_API_KEY` | `sk-...` |
| `PINECONE_API_KEY` | `pcsk_...` |
| `PINECONE_INDEX` | `gaida-hr-rules` |
| `ALLOWED_ORIGINS` | `https://frontend-iqeh.onrender.com` |

### Step 2: Frontend ì„œë¹„ìŠ¤

| ì„¤ì • | ê°’ |
|---|---|
| Runtime | Docker |
| Dockerfile Path | `./frontend/Dockerfile` |
| Docker Build Context | `.` |

**Environment Variables:**
| Key | Value |
|---|---|
| `BACKEND_URL` | `https://hr-chatbot-project.onrender.com` |

### API ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… |
|---|---|---|
| `GET` | `/` | ì„œë²„ ìƒíƒœ í™•ì¸ |
| `GET` | `/health` | Health Check |
| `GET` | `/docs` | Swagger API ë¬¸ì„œ |
| `POST` | `/chat` | ì±—ë´‡ ì§ˆì˜ (`{"query": "ì§ˆë¬¸"}`) |

---

## ğŸ“ ì‚¬ìš© ì˜ˆì‹œ

**âœ… RAG ë‹µë³€**
```
ğŸ‘¤: "ì…ì‚¬ 4ê°œì›”ì°¨ì—ëŠ” ì—°ì°¨ ì–¼ë§ˆë‚˜ ìˆë‚˜ìš”?"
ğŸ¤–: "ì…ì‚¬ 4ê°œì›” ì°¨ë¼ë©´ 1ë…„ ë¯¸ë§Œ ê·¼ì†ìì— í•´ë‹¹í•˜ë¯€ë¡œ, ë§¤ë‹¬ 1ê°œì›” ë§Œê·¼ ì‹œ 1ê°œì˜ ì›”ì°¨ê°€ ë¶€ì—¬ë©ë‹ˆë‹¤..."
```

**ğŸ“ ë‹´ë‹¹ì ì•ˆë‚´**
```
ğŸ‘¤: "ê¸‰ì—¬ ê³„ì‚°ì— ì˜¤ë¥˜ê°€ ìˆëŠ” ê²ƒ ê°™ì€ë° ì–´ë””ì— ë¬¸ì˜í•´ì•¼ í•˜ë‚˜ìš”?"
ğŸ¤–: "í•´ë‹¹ ë¬¸ì˜ì‚¬í•­ì€ ì¸ì‚¬íŒ€ìœ¼ë¡œ ë¬¸ì˜í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ğŸ“§ hr@gaida.play.com ğŸ’¬ #ask-hr"
```

**âŒ ì§ˆë¬¸ ê±°ì ˆ**
```
ğŸ‘¤: "ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì–´ë•Œìš”?"
ğŸ¤–: "ì…ë ¥í•˜ì‹  ì§ˆë¬¸ì€ HR ê´€ë ¨ ë¬¸ì˜ê°€ ì•„ë‹™ë‹ˆë‹¤. HR ê´€ë ¨ ì§ˆë¬¸ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤."
```

---

## ğŸ‘¥ ê°œë°œ ê³¼ì •

| ë‚´ìš© |
|---|---|
| ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë° ì•„í‚¤í…ì²˜ ì„¤ê³„ |
| ê°€ìƒ íšŒì‚¬ ë°ì´í„° ì œì‘ ë° ë²¡í„°DB êµ¬ì¶• |
| LangGraph ë…¸ë“œ ê°œë°œ ë° ë¼ìš°íŒ… ë¡œì§ êµ¬í˜„ |
| í†µí•© í…ŒìŠ¤íŠ¸ ë° LangGraph Studio ìµœì í™” |
| MVP ì™„ì„± ë° ì‹œì—° ì¤€ë¹„ |
| ë°°í¬ |

### ì£¼ìš” ë„ì „ê³¼ì œ

| ê³¼ì œ | ë¬¸ì œ | í•´ê²° |
|---|---|---|
| HR ë°ì´í„° í™•ë³´ | ê¸°ë°€ì„±Â·ì €ì‘ê¶Œìœ¼ë¡œ ì‹¤ì œ ë°ì´í„° ì‚¬ìš© ë¶ˆê°€ | ê°€ìƒ íšŒì‚¬ ëª¨ë¸ë§ìœ¼ë¡œ ë°ì´í„°ì…‹ ìì²´ ì œì‘ |
| ì„ë² ë”© ëª¨ë¸ ë©”ëª¨ë¦¬ | í•œêµ­ì–´ íŠ¹í™” ëª¨ë¸ ë©”ëª¨ë¦¬ ë¶€ì¡± | OpenAI embeddings-3-small API í™œìš© |
| ë‹µë³€ í’ˆì§ˆ ì¼ê´€ì„± | RAG ë‹µë³€ ì •í™•ì„± ë³´ì¥ í•„ìš” | ë¬¸ì„œ ê¸°ë°˜ ê²€ì¦ + ì¬ìƒì„± ë£¨í”„ êµ¬í˜„ |
| ì½”ë“œ ë³µì¡ë„ | ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§ ë°œìƒ | `with_structured_output`ìœ¼ë¡œ ë‹¨ìˆœí™” |

---